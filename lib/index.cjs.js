"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const DATE_REG=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/;function getDataType(t){return Object.prototype.toString.call(t).slice(8,-1)}function mapToArr(t){let e=[];return t.forEach((n,r)=>{e.push([r,n])}),e}function setToArr(t){let e=[];return t.forEach(n=>{e.push(n)}),e}const Strategy={Function:{stringify:t=>{let e=t.toString();return e.length<8||e.substring(0,8)!=="function"?"_AsEaAf_"+e:e}},RegExp:{stringify:t=>"_KiGyRg_"+t},Map:{stringify:t=>"_AggMap_"+stringify(mapToArr(t))},Set:{stringify:t=>"_KhsSet_"+stringify(setToArr(t))}};function stringify(t,e){return JSON.stringify(t,function(n,r){const i=getDataType(r);return Object.keys(Strategy).includes(i)?Strategy[i].stringify(r):r},e)}function parse(str){return JSON.parse(str,function(key,value){if(typeof value!="string"||value.length<8)return value;const prefix=value.substring(0,8);return DATE_REG.test(value)?new Date(value):prefix==="function"?eval("("+value+")"):prefix==="_AsEaAf_"||prefix==="_KiGyRg_"?eval(value.slice(8)):prefix==="_AggMap_"?new Map(parse(value.slice(8))):prefix==="_KhsSet_"?new Set(parse(value.slice(8))):value})}exports.parse=parse;exports.stringify=stringify;
